-- Created by Arthur Duarte
-- https://github.com/DimplyKhan13/VMwareLog_Hana.git

CREATE VIEW "SCHEMA"."CURRENT_VM_AND_DISK" ( "VM_NAME",
        "CPU",
        "MEMORY",
        "STATE",
        "DISK_NAME",
        "CAPACITY",
        "DATASTORE" ) AS SELECT
        "VM_NAME"."NAME" AS "VM_NAME",
        "VM_CPU"."CPU" AS "CPU",
        "VM_MEMORY"."MEMORY" AS "MEMORY",
        "VM_STATE"."STATE" AS "STATE",
        "DISK_NAME"."NAME" AS "DISK_NAME",
        "DISK_CAPACITY"."CAPACITY" AS "CAPACITY",
        "DISK_DATASTORE"."DATASTORE" AS "DATASTORE" 
    FROM (((((((("DISK_CURRENT" 
        LEFT JOIN "SCHEMA"."VM_CURRENT" ON ("DISK_CURRENT"."VM_ID" = "VM_CURRENT"."VM_ID")) 
        LEFT JOIN "SCHEMA"."VM_NAME" ON ("VM_CURRENT"."NAME_ID" = "VM_NAME"."ID")) 
        LEFT JOIN "SCHEMA"."DISK_NAME" ON ("DISK_CURRENT"."NAME_ID" = "DISK_NAME"."ID")) 
        LEFT JOIN "SCHEMA"."DISK_CAPACITY" ON ("DISK_CURRENT"."CAPACITY_ID" = "DISK_CAPACITY"."ID")) 
        LEFT JOIN "SCHEMA"."DISK_DATASTORE" ON ("DISK_CURRENT"."DATASTORE_ID" = "DISK_DATASTORE"."ID")) 
        LEFT JOIN "SCHEMA"."VM_CPU" ON ("VM_CURRENT"."CPU_ID" = "VM_CPU"."ID")) 
        LEFT JOIN "SCHEMA"."VM_MEMORY" ON ("VM_CURRENT"."MEMORY_ID" = "VM_MEMORY"."ID")) 
        LEFT JOIN "SCHEMA"."VM_STATE" ON ("VM_CURRENT"."STATE_ID" = "VM_STATE"."ID")) 
    WHERE "DISK_CURRENT"."IS_DELETED" = 0 
    AND "VM_CURRENT"."IS_DELETED" = 0 
    ORDER BY "VM_NAME"."NAME" 
    WITH READ ONLY